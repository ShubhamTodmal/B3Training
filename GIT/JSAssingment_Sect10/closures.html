<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>A Closer Look at Functions</title>
    <style>
      body {
        height: 100vh;
        display: flex;
        align-items: center;
        background: linear-gradient(to top left, #28b487, #7dd56f);
      }
      h1 {
        font-family: sans-serif;
        font-size: 50px;
        line-height: 1.3;
        width: 100%;
        padding: 30px;
        text-align: center;
        color: white;
      }
      .buy,
      .poll {
        font-size: 1.6rem;
        padding: 1rem 2rem;
        position: absolute;
        top: 2rem;
      }
      .buy {
        left: 2rem;
      }
      .poll {
        right: 2rem;
      }
    </style>
  </head>
  <body>
    <h1>A Closer Look at Functions</h1>
    <button class="buy">Buy new plane üõ©</button>
    <button class="poll">Answer poll ‚ÅâÔ∏è</button>
    <script>

        const book = function()
        {
            let pass = 0;
            return function()
            {
                pass++;
                console.log(`${pass} no of passanger`);
            }
        };

        const booking = book();//here we see book function returns the inneer function so book have value of return funciton so we store that value in the booking and call it to run the whole function that how it worked

        booking();
        booking();
        booking();

        // what is the closure
        //here in above function execution first book() has global scope then it has a variable then it raturn a new function and function complete its execution and it goes outof scope but have bookking which also a global scope and store the what book() return
        // but we know book() goes outof scope still how bookin() can have access to its variable. so there is what closure it a process where it take care of function even when they outof scope is still provide reference to booking() to access book()
        
        //*************DEFINE**************************
        // closure is gives function to access of its members where it born even its parent goes out of scope
        // we can say its a bagpack it carries parent function reference where it need to child

        // example for closure
        //     1========
        let f;
        const g = function()
        {
            const a = 12;
            f = function()
            {
                console.log(a*2);
            }
        };
        g();
        f();//here f is declare out of function and but it define in g() so even g() outof scope f() can access its variable and that what is closure cause f is define in g() even it born out

        //let create new function and re-assign f
        const h = function()
        {
            const b = 2;
            f= function()
            {
                console.log(b*2);
            }
        };
        h();
        f();//remember here f() is diff function that aboves f()
        // as new values re-assing to f() then old closure gonna dissapear
        // we can say f() 1st born at g() and then reborn in h() as it reborn it lost old parent reference

        //       2=================
        const boardoing = function(pass,wait)
        {
            const group = pass/3;

            setTimeout(function(){
                console.log(`We are borading all ${pass} passange`);
                console.log(`There are are 3 groupt, each have ${group} passanger`);
            },wait * 1000);// we multiply wait by 1000 cause setTimrOut() takes time in milisecond

            console.log(`Wait, Borading will start in ${wait} sec!`);
        }

        //boardoing(150,5);//here we see we wait fot 5 sec to run setTimeOut call back function  but last console is still print 1stly cause.
        //even if it at last our callback function need 5 sec to start execution to JS 1st finish next execution and after 5 sec setTimeOut's callback functoin run
        //As we know settimeOut is best example of callback function

        // So where is closure???
        // here boarding run completely even callback fucntion has to wait. SO Still callback function has its access that the closure happens here
        
        // let assign group out side of function
        group = 60;
        boardoing(150,5);//here we see closure has its priority for access
        // as we know callback function is run in global scope so its 1st see 'group' variable in global scope is find so it access it

        // but if 'group' is in both scope as in function and in global then closure close to parent scope as its priority is fixed so it access parents 'group' data

        


    </script>
  </body>
</html>
